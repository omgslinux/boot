{% extends 'base.html.twig' %}

{% block title %}Hello PhpreaderController!{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <script src="{{ asset('js/chartloader.js') }}"></script>

{% endblock %}

{% block main %}
    <div id="curve_chart" style="width: 900px; height: 500px"></div>
    <div id="curve_chart2" style="width: 900px; height: 500px"></div>

    <script>
    google.charts.load('current', {'packages':['corechart']});
    a =[
        ['Year', 'Ventas', 'Gastos'],
        ['2004',  1000,      400],
        ['2005',  1170,      460],
        ['2006',  660,       1120],
        ['2007',  1030,      540]
    ];
    google.charts.setOnLoadCallback(drawChart);
    console.log(a)
    let b = {{ data|json_encode|raw }}
    console.log(b)

    function drawChart() {
        {# var data2 = google.visualization.arrayToDataTable([
            ['Year', 'Ventas', 'Gastos'],
            ['2004',  1000,      400],
            ['2005',  1170,      460],
            ['2006',  660,       1120],
            ['2007',  1030,      540]
        ]) #}
      const curveChart = document.querySelector('#curve_chart');
      var data = google.visualization.arrayToDataTable(b)

      var options = {
        title: 'Company Performance',
        curveType: 'function',
        legend: { position: 'bottom' }
      };

      var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

      chart.draw(data, options);
    }
    </script>
{% endblock %}
